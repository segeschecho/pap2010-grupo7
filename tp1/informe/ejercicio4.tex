\chapter{Problema 4}

\section{Minimal Coverage}

Dados segmentos de una línea (en el eje X) con coordenadas [$L_i$,$R_i$]. Se debe elegir la minima cantidad de estos segmentos, tales que cubran completamente el segmento [$0$,$M$].

\textbf{Input:}

El input esta dividido en varias partes:

La primera línea, consiste en un número e indica la cantidad de casos de test, seguido de una línea en blanco.

Luego sigue el test, que consiste en un número, que identifica el segmento [$0$,$M$] (donde $1<= M <= 5000$), seguido de pares $L_i$ $R_i$ que identifican segmentos ($|L_i|$, $|R_i|$ $<=50000$, e $i <= 100000$), cada uno separados por una linea. Cada test termina con el par $0$ $0$.

\textbf{Output:}

Para cada caso de test, la primera línea indica el mínimo numero de segmentos que pueden cubrir el segmento [$0$,$M$]. En las líneas siguientes, las coordenadas de los segmentos, ordenados por su coordenada izquierda ($L_i$), con el mismo formato que en el input. El par $0$ $0$ no debe ser mostrado.

Si [$0$,$M$] no puede ser cubierto, se debe devolver 0.

Cada resultado entre tests, debe estar separado por una línea en blanco.

\textbf{Url:}

\href{http://uva.onlinejudge.org/index.php?option=com\_onlinejudge\&Itemid=8\&category=12\&page=show\_problem\&problem=961}{Problema de minimal coverage}

\subsection{Solución}

Para llegar a la solución de este problema, se tuvo como idea de resolución una técnica golosa, donde en cada paso se decide cuales de las opciones que se tienen disponibles en ese paso, garantizan un resultado óptimo.

Dicha idea consiste básicamente, en ir tomando los intervalos que cubran mas a la derecha posible desde el intervalo cubierto hasta el momento y luego, una vez encontrado dicho intervalo, actualizar la zona cubierta hasta ese paso. Para hacer esto, como primera medida, se ordenan los intervalos recibidos como entrada del problema, de menor a mayor, por su primera coordenada. Con esta medida se pueden ir recorriendo en orden los intervalos de entrada y escoger aquel que nos pueda ayudar a dar un solución optima.

A continuación se describirán los pasos mas importantes de la solución para que la idea quede mejor explicada.

\begin{enumerate}
\item Paso 1: En este paso, se ordenan los intervalos recibidos como entrada del problema y se los ordena de menor a mayor por su primera componente. Esto se hace para facilitar la búsqueda del mejor intervalo en cada paso.
\item Paso 2: Utilizando la lista de pares ordenados del punto anterior, lo que se hace aqui, es recorrer cada par (intervalo) de forma tal de seleccionar aquel que tenga su segunda coordenada mas grande y que comience dentro del intervalo cubierto hasta el momento (es decir que su primera coordenada sea menor a cierto valor, que en principio es 0, ya que no se ha cubierto nada aún).
\item Paso 3: Una vez obtenido el intervalo del paso 2, se actualiza el valor que representa lo cubierto hasta el momento, cambiándolo por la segunda coordenada del intervalo obtenido.
\end{enumerate}

A continuación se mostrará como el método encuentra la solución para un ejemplo, en donde se ingresan los intervalos [1,3], [-2,0], [0,1], [-1,2] y donde el intervalo a cubrir es el [0,3]. 


\begin{figure}[H]
\centering
\label{ej4_1}
\subfigure[intervalos en el orden en que fueron ingresados.]{
\includegraphics[scale=0.5]{./graficos/ej4/ej4_1_0.png} }\hspace{0.5in} 
\subfigure[intervalos una vez ordenados.]{
\includegraphics[scale=0.5]{./graficos/ej4/ej4_1_1.png}}\hspace{0.5in} 
\subfigure[seleccionar los intervalos que tengan alguna coordenada en el intervalo actual $(0,0)$]{
\includegraphics[scale=0.5]{./graficos/ej4/ej4_1_2.png}}\hspace{0.5in} 
\subfigure[se selecciona el que tiene la segunda coordenada mayor (intervalo b), se lo agrega como solución, y se actualiza el intervalo cubierto, que será $(0,2)$]{
\includegraphics[scale=0.5]{./graficos/ej4/ej4_1_3.png}} \hspace{0.5in} 
\subfigure[se seleccionan los intervalos siguientes y que tengan alguna coordenada dentro del intervalo actual $(0,2)$]{
\includegraphics[scale=0.5]{./graficos/ej4/ej4_1_4.png} }\hspace{0.5in} 
\subfigure[se toma el de mayor segunda coordenada(intervalo d), se agrega como solución y se actualiza el intervalo cubierto a $(0,3)$]{
\includegraphics[scale=0.5]{./graficos/ej4/ej4_1_5.png}}
\caption{Pasos hasta hallar la solución}
\setcounter{subfigure}{0}
\end{figure}

\subsection{Por qué esta solución?}

En cuanto al criterio de orden entre intervalos al momento de ordenarlos, elegimos que sea por su primera coordenada, pues esto nos permite avanzar (es decir, iterativamente agrandar el intervalo cubierto para llegar a la solución) linealmente en el intervalo [0,M], lo que no es posible si el orden fuese por segunda coordenada. De usar un criterio de ordenamiento como este segundo, sería conveniente avanzar en el intervalo [0,M] desde fin a principio.

Ordenar los intervalos es escencialmente innecesario para el problema, pues para construir una solución se podría recorrer siempre todos los intervalos y avanzar en [0,M] elegiendo según el criterio del paso 2 del algoritmo. Sin embargo ordenar los intervalos nos asegura una mejor complejidad en peor caso.

El paso 2 nos asegura que no elegiremos intervalos de más y que el algoritmo siempre avanza y nunca vuelve en el intervalo ya cubierto (recorre linealmente la lista de intervalos, que a este punto está ordenada, sin volver atras, y va construyendo la solución). Al considerar aquellos pares que tengan su primera coordenada dentro del intervalo ya cubierto evitamos dejar ´huecos´ en el desarrollo de la solución para no volver entre los intervalos ya vistos. Al elegir entre ellos aquel que tenga su mayor segunda coordenada logramos avanzar lo máximo posible en cada iteración, sin perder soluciones y asegurando siempre la de menor cantidad de intervalos. Veamos de nuevo el ejemplo de la figura \ref{ej4_1}. Si hubiésemos elegido el intervalo c en lugar del b, la cantidad de intervalos final sería igual (2 intervalos). O sea, sea [x,y] un intervalo a cubrir, y sean los siguientes intervalos:

\begin{figure}[H]
\centering
\label{ej4_2_0}
\subfigure[intervalo a cubrir $(x,y)$ e intervalos de entrada]{
\includegraphics[scale=0.5]{./graficos/ej4/ej4_2_0.png}}\hspace{0.5in} 
\setcounter{subfigure}{0}
\end{figure}

Supongamos que tenemos un algoritmo alternativo \textbf{MC}, que, en lugar de elegir el intervalo que más cubre, selecciona cualquier otro intervalo al azar. Compararemos la solución que encuentra MC y la que encuentra nuestro algoritmo:

\begin{figure}[H]
\centering
\label{ej4_2_1,2}
\subfigure[solución que encuentra nuestro algoritmo]{
\includegraphics[scale=0.5]{./graficos/ej4/ej4_2_1.png}} \hspace{0.5in} 
\subfigure[solución que encuentra MC]{
\includegraphics[scale=0.5]{./graficos/ej4/ej4_2_2.png} }\hspace{0.5in} 
\caption{Solución alternativa de igual cantidad de intervalos con MC}
\setcounter{subfigure}{0}
\end{figure}

Como vemos, la solución alternativa requiere la misma cantidad de intervalos que los que nuestro algoritmo calcula, por lo tanto para este caso nuestro algoritmo encuentra igual cantidad de intervalos para cubrir [x,y] que MC.

Veamos otro caso. Nuevamente tenemos el intervalo a cubrir [x,y] y los intervalos de entrada:

\begin{figure}[H]
\centering
\label{ej4_3_0}
\subfigure[intervalo a cubrir $(x,y)$ e intervalos de entrada]{
\includegraphics[scale=0.5]{./graficos/ej4/ej4_3_0.png}}\hspace{0.5in} 
\setcounter{subfigure}{0}
\end{figure}

Las soluciones correspondientes a nuestro algoritmo y a MC son:

\begin{figure}[H]
\centering
\label{ej4_3_1,2}
\subfigure[solución que encuentra nuestro algoritmo]{
\includegraphics[scale=0.5]{./graficos/ej4/ej4_3_1.png}} \hspace{0.5in} 
\subfigure[solución que encuentra MC]{
\includegraphics[scale=0.5]{./graficos/ej4/ej4_3_2.png} }\hspace{0.5in} 
\caption{Solución alternativa de igual cantidad de intervalos con MC}
\setcounter{subfigure}{0}
\end{figure}

La solución que nuestro algoritmo encuentra es la óptima, sin embargo MC encuentra una solución con 3 intervalos. Esto es así porque cuando estaba eligiendo entre los intervalos a y b, MC incluyó a b en su solución, y siguió adelante con c y d (recordar que no se vuelve a decidir con intervalos ya antes vistos, pues se recorre la lista de intervalos de forma lineal y se va armando la solución).

Veamos otro caso. Nuevamente tenemos el intervalo a cubrir [x,y] y los intervalos de entrada:

\begin{figure}[H]
\centering
\label{ej4_4_0}
\subfigure[intervalo a cubrir $(x,y)$ e intervalos de entrada]{
\includegraphics[scale=0.5]{./graficos/ej4/ej4_4_0.png}}\hspace{0.5in} 
\setcounter{subfigure}{0}
\end{figure}

Las soluciones correspondientes a nuestro algoritmo y a MC son:

\begin{figure}[H]
\centering
\label{ej4_4_1,2}
\subfigure[solución que encuentra nuestro algoritmo]{
\includegraphics[scale=0.5]{./graficos/ej4/ej4_4_1.png}} \hspace{0.5in} 
\subfigure[solución que encuentra MC]{
\includegraphics[scale=0.5]{./graficos/ej4/ej4_4_2.png} }\hspace{0.5in} 
\caption{Solución alternativa de igual cantidad de intervalos con MC}
\setcounter{subfigure}{0}
\end{figure}

Nuestro algoritmo encuentra solución, pero MC no, porque MC ignora el intervalo que más cubre en la primera iteración. Por lo tanto nuestro algoritmo encontró una mejor solución.

Por último, tenemos otro caso:

\begin{figure}[H]
\centering
\label{ej4_5_0}
\subfigure[intervalo a cubrir $(x,y)$ e intervalos de entrada]{
\includegraphics[scale=0.5]{./graficos/ej4/ej4_5_0.png}}\hspace{0.5in} 
\setcounter{subfigure}{0}
\end{figure}

Las soluciones correspondientes a nuestro algoritmo y a MC son:

\begin{figure}[H]
\centering
\label{ej4_5_1,2}
\subfigure[solución que encuentra nuestro algoritmo]{
\includegraphics[scale=0.5]{./graficos/ej4/ej4_5_1.png}} \hspace{0.5in} 
\subfigure[solución que encuentra MC]{
\includegraphics[scale=0.5]{./graficos/ej4/ej4_5_2.png} }\hspace{0.5in} 
\caption{Solución alternativa de igual cantidad de intervalos con MC}
\setcounter{subfigure}{0}
\end{figure}

Ninguno de los dos algoritmos encuentra solución, pues no la hay. No se puede cubrir el intervalo [x,y].

En conclusión, nuestro algoritmo es igual o mejor que los demas (en cuanto a encontrar la mínima cantidad de intervalos que cubre [0,M]).

El paso 3 nos asegura que el algoritmo termina, y que lo hace al cubrir el intervalo [0,M] o al encontrar un hueco dentro del mismo con los intervalos dados.

\subsection{Cálculo de complejidad}

\begin{algorithm}[H]
\caption{Calcula el step ladder de largo máximo}
\label{alg:algoritmo1b}
\begin{algorithmic}[1]
\PARAMS{cantidad de palabras}
\STATE inicializar los maximos step ladders de cada palabra en 1
\STATE inicializar maxLadder = 1
\FOR{cada palabra P}
	\STATE \COMMENT{borrado de letras}
	\STATE borrar de a un caracter por vez de P y buscar esta nueva palabra en las palabras anteriores a P
	\STATE si se encuentra actualizar el max step ladder de P
	\STATE \COMMENT{reemplazo de letras}
	\STATE reemplazar las letras de P de a una por vez por las letra del abecedario desde `a´ hasta la letra a cambiar, formando $P'$
	\STATE buscar $P'$ en las palabras anteriores a P
	\STATE si se encuentra actualizar el max step ladder de P
	\STATE \COMMENT{agregado de letras}
	\STATE agregar letras de a una por vez en cada posicion de P formando $P'$
	\STATE buscar $P'$ en las palabras anteriores a P
	\STATE si se encuentra actualizar el max step ladder de P
	\STATE actualizar maxLadder
\ENDFOR
\RETURN maxLadder
\end{algorithmic}
\end{algorithm}
